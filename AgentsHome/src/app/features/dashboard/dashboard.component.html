<div class="dashboard-wrapper">
  <!-- Sidebar Navigation -->
  <div class="sidebar" [class.open]="sidebarOpen">
    <div class="sidebar-header">
      <h3>AgentsHome</h3>
      <button class="btn-close-sidebar" (click)="toggleSidebar()">âœ•</button>
    </div>
    
    <nav class="sidebar-nav">
      <button 
        *ngFor="let item of navigationItems"
        class="nav-item"
        [class.active]="currentView === item.id"
        (click)="setView(item.id)">
        <span class="nav-icon">{{ item.icon }}</span>
        <span class="nav-label">{{ item.label }}</span>
      </button>
    </nav>

    <div class="sidebar-footer">
      <div class="user-info">
        <div class="user-avatar">{{ currentUser?.name?.charAt(0) || 'U' }}</div>
        <div class="user-details">
          <p class="user-name">{{ currentUser?.name }}</p>
          <p class="user-email">{{ currentUser?.email }}</p>
        </div>
      </div>
      <button (click)="logout()" class="btn-logout">Logout</button>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Header -->
    <div class="main-header">
      <button class="btn-menu" (click)="toggleSidebar()">â˜°</button>
      <h1>Dashboard</h1>
      <div class="header-spacer"></div>
    </div>

    <!-- Content Wrapper: Main View + Right Panel -->
    <div class="content-wrapper">
      <!-- Overview View (Default) -->
      <div *ngIf="currentView === 'overview'" class="view-content overview-view">
        <div class="section-title">
          <h2>Purchased Agents</h2>
          <p class="subtitle">Your active agents and usage</p>
        </div>

        <!-- Subscription Summary -->
        <div class="subscription-summary">
          <div class="summary-card">
          <div class="summary-info">
            <h3>{{ subscription.plan }} Plan</h3>
            <p class="plan-status" [class.active]="subscription.status === 'active'">
              {{ subscription.status | uppercase }}
            </p>
          </div>
          <div class="summary-usage">
            <div class="usage-stat">
              <span class="stat-label">Agents Used</span>
              <span class="stat-value">{{ subscription.agentsUsed }}/{{ subscription.agentsAllowed }}</span>
            </div>
            <div class="usage-progress">
              <div class="progress-bar">
                <div 
                  class="progress-fill"
                  [style.width.%]="(subscription.agentsUsed / subscription.agentsAllowed) * 100"
                  [ngClass]="getUsageBarColor((subscription.agentsUsed / subscription.agentsAllowed) * 100)">
                </div>
              </div>
            </div>
          </div>
          <div class="summary-renewal">
            <span class="renewal-label">Renewal:</span>
            <span class="renewal-date">{{ subscription.renewalDate }}</span>
          </div>
        </div>
      </div>

      <!-- Agents List -->
      <div class="agents-container">
        <div class="agents-header">
          <h3>Your Agents</h3>
          <span class="agent-count">{{ agents.length }} agents</span>
        </div>

        <div class="agents-grid">
          <div *ngFor="let agent of agents" class="agent-card">
            <div class="agent-header">
              <div class="agent-info">
                <h4 class="agent-name">{{ agent.name }}</h4>
                <p class="agent-type">{{ agent.type }}</p>
              </div>
              <span class="agent-status" [ngClass]="getStatusClass(agent.status)">
                {{ agent.status | uppercase }}
              </span>
            </div>

            <div class="agent-usage">
              <div class="usage-label">
                <span>Usage</span>
                <span class="usage-percent">{{ agent.usagePercentage }}%</span>
              </div>
              <div class="progress-bar">
                <div 
                  class="progress-fill"
                  [style.width.%]="agent.usagePercentage"
                  [ngClass]="getUsageBarColor(agent.usagePercentage)">
                </div>
              </div>
              <div class="usage-details">
                <span class="current">{{ agent.currentUsage | number }}</span>
                <span class="divider">/</span>
                <span class="total">{{ agent.totalAllowed | number }}</span>
              </div>
            </div>

            <div class="agent-actions">
              <button class="btn-small btn-primary">View Details</button>
              <button class="btn-small btn-secondary">Manage</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Other Views (Placeholder) -->
    <div *ngIf="currentView === 'agents'" class="view-content">
      <h2>Agents Management</h2>
      <p>Coming soon...</p>
    </div>

    <div *ngIf="currentView === 'leads'" class="view-content">
      <h2>Leads Management</h2>
      <p>Coming soon...</p>
    </div>

    <div *ngIf="currentView === 'subscription'" class="view-content">
      <h2>Subscription</h2>
      <p>Coming soon...</p>
    </div>

    <div *ngIf="currentView === 'settings'" class="view-content">
      <h2>Settings</h2>
      <p>Coming soon...</p>
    </div>

    <!-- Right Panel -->
    <div class="right-panel">
      <!-- Upcoming Releases Section -->
      <div class="panel-section">
        <h3 class="panel-title">ğŸš€ Upcoming Releases</h3>
        <div *ngFor="let release of upcomingReleases" class="release-card">
          <div class="release-header">
            <span class="release-version">v{{ release.version }}</span>
            <span class="release-date">{{ release.date }}</span>
          </div>
          <ul class="release-features">
            <li *ngFor="let feature of release.features">{{ feature }}</li>
          </ul>
        </div>
      </div>

      <!-- Current Release Features Section -->
      <div class="panel-section">
        <h3 class="panel-title">âœ¨ Current Release</h3>
        <div *ngFor="let feature of currentReleaseFeatures" class="feature-card">
          <div class="feature-header">
            <span *ngIf="feature.isNew" class="badge-new">NEW</span>
            <h4 class="feature-title">{{ feature.title }}</h4>
          </div>
          <p class="feature-desc">{{ feature.description }}</p>
        </div>
      </div>

      <!-- Unexplored Features Section -->
      <div class="panel-section">
        <h3 class="panel-title">ğŸ”’ Upgrade Your Plan</h3>
        <div *ngFor="let feature of unexploredFeatures" class="unexplored-card">
          <div class="unexplored-icon">{{ feature.icon }}</div>
          <h4 class="unexplored-title">{{ feature.title }}</h4>
          <p class="unexplored-desc">{{ feature.description }}</p>
          <span class="unexplored-plan">{{ feature.plan }}</span>
        </div>
      </div>

      <!-- FAQ Section -->
      <div class="panel-section">
        <h3 class="panel-title">â“ FAQ</h3>
        <div class="faq-container">
          <div 
            *ngFor="let item of faqItems; let i = index"
            class="faq-item"
            [class.open]="expandedFAQIndex === i">
            <button 
              class="faq-question"
              (click)="toggleFAQ(i)">
              <span>{{ item.question }}</span>
              <span class="faq-icon">{{ expandedFAQIndex === i ? 'âˆ’' : '+' }}</span>
            </button>
            <div *ngIf="expandedFAQIndex === i" class="faq-answer">
              {{ item.answer }}
            </div>
          </div>
        </div>
      </div>

      <!-- Documentation Link -->
      <div class="panel-section documentation-section">
        <h3 class="panel-title">ğŸ“š Documentation</h3>
        <p class="doc-text">Need help? Check out our comprehensive guides and API documentation.</p>
        <a href="https://docs.agentshome.com" target="_blank" class="doc-link">
          Visit Documentation â†’
        </a>
      </div>
    </div>
  </div>
  </div>

  <!-- Mobile Overlay -->
  <div *ngIf="sidebarOpen" class="mobile-overlay" (click)="toggleSidebar()"></div>
</div>

